(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[873],{1842:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(2137),r=n(18),l=n(7757),c=n.n(l),s=(n(7727),n(7294)),o=n(5444),m=n(3661);function i(e){var t=e.data.node;return s.createElement("div",{class:"flex items-center hover:bg-gray-100 -mx-8 px-6 py-5"},s.createElement("div",{class:"flex w-2/5"},s.createElement("div",{class:"w-40"},s.createElement("img",{class:"h-24 object-cover",src:t.image.high,alt:""})),s.createElement("div",{class:"flex flex-col justify-between ml-4 flex-grow"},s.createElement("span",{class:"font-bold text-sm"},t.name),s.createElement("span",{class:"text-gray-600 text-xs"},t.description),s.createElement("a",{href:"#",class:"font-semibold hover:text-red-500 text-gray-500 text-xs"},"Remove"))),s.createElement("div",{class:"flex justify-center w-1/5"},s.createElement("svg",{class:"fill-current text-gray-600 w-3",viewBox:"0 0 448 512"},s.createElement("path",{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"})),s.createElement("input",{class:"mx-2 border text-center w-8",type:"text",value:"1"}),s.createElement("svg",{class:"fill-current text-gray-600 w-3",viewBox:"0 0 448 512"},s.createElement("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}))),s.createElement("span",{class:"text-center w-1/5 font-semibold text-sm"},t.price),s.createElement("span",{class:"text-center w-1/5 font-semibold text-sm"},t.price))}var d=n(1919);function p(e){e.data,e.location,e.props;var t=(0,s.useContext)(d.CartContext),n=t.products,l=(t.addProduct,{productId:(0,r.Z)(n),referenceNumber:"",name:"",phone:"",promocode:""}),p=(0,s.useState)(l),u=p[0],f=p[1],x=(0,s.useState)(!1),h=x[0],b=x[1],E=(0,s.useState)({}),v=(E[0],E[1]),g=(0,s.useState)(!0),y=g[0],w=g[1];(0,s.useEffect)((function(){var e;""===u.name||""===u.phone||(null===(e=u.phone)||void 0===e?void 0:e.length)<7||u.phone.length>7?w(!0):w(!1),console.log(u,n)}),[u,n]);var C=function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:""+u.productId,name:""+u.name,phone:""+u.phone})},e.next=4,fetch("https://us-central1-nancy-s-jewerly.cloudfunctions.net/api/order",t).then((function(e){return e.json()})).then((function(e){e.error?v(e.error):(0,o.navigate)("/view-order",{state:{referenceCode:e.referenceCode}})})).finally((function(){return b(!1)})).catch((function(e){return v(e.message)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){var t;f(Object.assign({},u,((t={})[e.target.name]=e.target.value,t)))};return s.createElement(m.Z,null,s.createElement("div",{class:"container mx-auto mt-10"},s.createElement("div",{class:"flex shadow-md my-10"},s.createElement("div",{class:"w-3/4 bg-gray-50 px-10 py-10"},s.createElement("div",{class:"flex justify-between border-b pb-8"},s.createElement("h1",{class:"font-semibold text-2xl"},"Shopping Cart"),s.createElement("h2",{class:"font-semibold text-2xl"},null==n?void 0:n.length," Items")),s.createElement("div",{class:"flex mt-10 mb-5"},s.createElement("h3",{class:"font-semibold text-gray-600 text-xs uppercase w-2/5"},"Product"),s.createElement("h3",{class:"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center"},"Quantity"),s.createElement("h3",{class:"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center"},"Price"),s.createElement("h3",{class:"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center"},"Total")),s.createElement(o.StaticQuery,{query:"1065498526",render:function(e){return e.allRestApiApiProducts.edges.map((function(e,t){if(n.includes(e.node.id))return s.createElement(i,{data:e})}))}}),s.createElement("a",{href:"/shop",class:"flex font-semibold text-indigo-600 text-sm mt-10"},s.createElement("svg",{class:"fill-current mr-2 text-indigo-600 w-4",viewBox:"0 0 448 512"},s.createElement("path",{d:"M134.059 296H436c6.627 0 12-5.373 12-12v-56c0-6.627-5.373-12-12-12H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.569 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296z"})),"Continue Shopping")),s.createElement("div",{id:"summary",class:"w-1/2 px-8 py-10 bg-gray-100"},s.createElement("div",{className:"flex flex-row justify-between border-b"},s.createElement("h1",{class:"font-semibold text-2xl pb-8"},"Order Details")),s.createElement("div",{class:"py-3"},s.createElement("label",{for:"promo",class:"font-semibold inline-block mb-3 text-sm uppercase"},"Full Name"),s.createElement("input",{onChange:k,type:"name",id:"name",name:"name",placeholder:"Name",class:"p-2 text-sm w-full",required:!0})),s.createElement("div",{class:"py-3"},s.createElement("label",{for:"promo",class:"font-semibold inline-block mb-3 text-sm uppercase"},"Phone #"),s.createElement("input",{onChange:k,type:"phone",id:"phone",name:"phone",placeholder:"+6644584",class:"p-2 text-sm w-full",required:!0})),s.createElement("div",{class:"flex flex-row justify-between"},s.createElement("div",{className:"py-3"},s.createElement("label",{for:"promo",class:"font-semibold inline-block mb-3 text-sm uppercase"},"Promo code"),s.createElement("input",{onChange:k,type:"name",id:"promo",name:"promoCode",placeholder:"YES",class:"p-2 text-sm w-full"}))),s.createElement("div",{className:"flex mt-6"},s.createElement("label",{className:"flex items-center"},s.createElement("input",{type:"checkbox",class:"form-checkbox"}),s.createElement("span",{class:"ml-2"},"I agree to the ",s.createElement("span",{class:"underline"},"terms and conditions")))),s.createElement("div",{className:"flex mt-6"},s.createElement("label",{className:"flex items-center"},s.createElement("input",{type:"checkbox",class:"form-checkbox"}),s.createElement("span",{class:"ml-2"},"I agree to subscribe to recieve ",s.createElement("span",{class:"underline"}," SMS messages ")," to get notified on orders"))),s.createElement("div",{class:"border-t mt-8"},s.createElement("div",{class:"flex font-semibold justify-between py-6 text-sm uppercase"},s.createElement("span",null,"Total cost"),s.createElement("span",null,"$5000")),s.createElement("button",{type:"button",onClick:C,disabled:y,class:"bg-indigo-500 font-semibold hover:bg-indigo-600 disabled:opacity-50  py-3 text-sm text-white uppercase w-full"},"Create Order",h?"loading...":""))))))}}}]);
//# sourceMappingURL=component---src-pages-cart-js-b36f813ee87894a134dc.js.map