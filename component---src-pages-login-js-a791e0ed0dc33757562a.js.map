{"version":3,"sources":["webpack://front-end/./src/pages/login.js","webpack://front-end/./src/services/auth.js"],"names":["Login","useState","email","password","loginDetails","setLoginDetails","isLoading","setLoading","error","setError","useEffect","console","log","handleLogin","e","preventDefault","requestOptions","method","headers","body","JSON","stringify","fetch","process","GATSBY_FIREBASE_API_KEY","then","response","json","data","setUser","navigate","finally","catch","message","handleChange","target","name","value","className","src","alt","href","action","onSubmit","type","for","onChange","id","autocomplete","required","placeholder","xmlns","viewBox","fill","aria-hidden","fill-rule","d","clip-rule","class","stroke","strokeLinecap","strokeLinejoin","strokeWidth","getUser","window","localStorage","getItem","parse","user","setItem","isLoggedIn","logout","callback"],"mappings":"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","file":"component---src-pages-login-js-a791e0ed0dc33757562a.js","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { navigate } from \"gatsby\"\nimport Layout from '../components/layouts/layout'\nimport { setUser } from '../services/auth' \n \nexport default function Login() {\n\n const initalState = {\n    email: '',\n    password: ''\n  }\n\n  const [loginDetails, setLoginDetails] = useState(initalState);\n  const [isLoading, setLoading ] = useState(false);\n  const [error, setError ] = useState({});\n\n  useEffect(() => {\n    console.log(loginDetails);\n    console.log(error);\n  }, [])\n\n  const handleLogin = async (e) => {\n    e.preventDefault(); \n    setLoading(true);\n    //send state values to api\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        \"email\": `${loginDetails.email}`,\n        \"password\": `${loginDetails.password}`,\n        \"returnSecureToken\": true\n      })\n  };\n  await fetch(`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${process.env.GATSBY_FIREBASE_API_KEY}`, requestOptions)\n      .then(response => response.json())\n      .then(data => {\n        if(data.error) { \n          setError(data.error)\n        } else {\n          setUser(data)  \n          navigate(`/app/dashboard`);\n        }\n      })\n      .finally(() => setLoading(false))\n      .catch(error => setError(error.message));\n  }\n\n  const handleChange = (e) => { \n     //spread value to keys \n     setLoginDetails({...loginDetails, [e.target.name]: e.target.value})\n  }\n\n  return (\n    <Layout>\n      <div className=\"min-h-screen flex justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-md w-full space-y-8\">\n          <div>\n            <img className=\"mx-auto h-12 w-auto\" src=\"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg\" alt=\"Workflow\"/>\n            <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n              Sign in to your account\n            </h2>\n            <p className=\"mt-2 text-center text-sm text-gray-600\">\n              Or\n              <a href=\"#\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\n                start your 14-day free trial\n              </a>\n            </p>\n          </div>\n          <form className=\"mt-8 space-y-6\" action=\"#\" method=\"POST\" onSubmit={handleLogin}>\n            <input type=\"hidden\" name=\"remember\" value=\"true\"/>\n            <div className=\"rounded-md shadow-sm -space-y-px\">\n              <div>\n                <label for=\"email-address\" className=\"sr-only\">Email address</label>\n                <input onChange={handleChange} value={loginDetails.email} id=\"email-address\" name=\"email\" type=\"email\" autocomplete=\"email\" required className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\" placeholder=\"Email address\"/>\n              </div>\n              <div>\n                <label for=\"password\" className=\"sr-only\">Password</label>\n                <input onChange={handleChange} value={loginDetails.password} id=\"password\" name=\"password\" type=\"password\" autocomplete=\"current-password\" required className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\" placeholder=\"Password\"/>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center\">\n                <input id=\"remember_me\" name=\"remember_me\" type=\"checkbox\" className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"/>\n                <label for=\"remember_me\" className=\"ml-2 block text-sm text-gray-900\">\n                  Remember me\n                </label>\n              </div>\n\n              <div className=\"text-sm\">\n                <a href=\"#\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\n                  Forgot your password?\n                </a>\n              </div>\n            </div>\n\n            <div>\n              <button type=\"submit\" className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\">\n                <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\">\n        \n                  <svg className=\"h-5 w-5 text-indigo-500 group-hover:text-indigo-400\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                    <path fill-rule=\"evenodd\" d=\"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z\" clip-rule=\"evenodd\" />\n                  </svg>\n                </span>\n                Sign in\n                {isLoading ? ' loading...' : ' '}\n              </button>  \n              {\n                error.message ? \n                <div>\n                    <div class=\"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10\">\n                    <svg class=\"h-6 w-6 text-red-600\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" aria-hidden=\"true\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                    </svg> \n                  </div>   \n                  <span>{error.message}</span>\n                </div>\n                : \n                ''\n              }\n            </div>\n          </form>\n        </div>\n      </div>\n    </Layout>\n  )\n}\n","export const isBrowser = () => typeof window !== \"undefined\"\n\nexport const getUser = () =>\n  isBrowser() && window.localStorage.getItem(\"gatsbyUser\")\n    ? JSON.parse(window.localStorage.getItem(\"gatsbyUser\"))\n    : {}\n\nexport const setUser = (user) => { \n  window.localStorage.setItem(\"gatsbyUser\", JSON.stringify(user))\n}\n\nexport const handleLogin = ({ username, password }) => {\n  if (username === `john` && password === `pass`) {\n    return setUser({\n      username: `john`,\n      name: `Johnny`,\n      email: `johnny@example.org`, \n    })\n  }\n\n  return false\n}\n\nexport const isLoggedIn = () => {\n  const user = getUser()\n\n  return !!user.email\n}\n\nexport const logout = callback => { \n  setUser({})\n  callback()\n}"],"sourceRoot":""}