(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[873],{9763:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var a=n(7294);function r(e){var t=e.data.node;return a.createElement("div",{class:"flex items-center hover:bg-gray-100 -mx-8 px-6 py-5"},a.createElement("div",{class:"flex w-2/5"},a.createElement("div",{class:"w-40"},a.createElement("img",{class:"h-24 object-cover",src:t.image.high,alt:""})),a.createElement("div",{class:"flex flex-col justify-between ml-4 flex-grow"},a.createElement("span",{class:"font-bold text-sm"},t.name),a.createElement("span",{class:"text-gray-600 text-xs"},t.description),a.createElement("a",{href:"#",class:"font-semibold hover:text-red-500 text-gray-500 text-xs"},"Remove"))),a.createElement("div",{class:"flex justify-center w-1/5"},a.createElement("svg",{class:"fill-current text-gray-600 w-3",viewBox:"0 0 448 512"},a.createElement("path",{d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"})),a.createElement("input",{class:"mx-2 border text-center w-8",type:"text",value:"1"}),a.createElement("svg",{class:"fill-current text-gray-600 w-3",viewBox:"0 0 448 512"},a.createElement("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}))),a.createElement("span",{class:"text-center w-1/5 font-semibold text-sm"},t.price),a.createElement("span",{class:"text-center w-1/5 font-semibold text-sm"},t.price))}},9926:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(2137),r=n(18),s=(n(7727),n(7757)),l=n.n(s),c=n(7294),o=n(4643),m=n(5444),i=n(3661),u=n(9763),d=n(1919);function p(e){e.data,e.location,e.props;var t=[],n=(0,c.useContext)(d.CartContext),s=n.products,p=(n.addProduct,(0,c.useState)(t)),f=p[0],x=p[1],b={productId:(0,r.Z)(s),referenceNumber:"",name:"",phone:"",promocode:""},h=(0,c.useState)(b),y=h[0],g=h[1],E=(0,c.useState)(!1),v=E[0],w=E[1],N=(0,c.useState)({}),C=(N[0],N[1]),k=(0,c.useState)(!0),j=k[0],S=k[1],T=(0,c.useState)(!1),F=T[0],P=T[1],V=(0,c.useRef)();(0,c.useEffect)((function(){var e;""===y.name||""===y.phone||(null===(e=y.phone)||void 0===e?void 0:e.length)<7||y.phone.length>7?S(!0):S(!1)}),[y,s]),(0,c.useEffect)((function(){x(t.reduce((function(e,t){return e+t}),0))}),[]);var q=function(){var e=(0,a.Z)(l().mark((function e(n){var a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.replace(/\$/g,""),t.push(Number(a));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=(0,a.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:""+y.productId,name:""+y.name,phone:""+y.phone})},e.next=4,fetch("https://us-central1-nancy-s-jewerly.cloudfunctions.net/api/order",t).then((function(e){if(e.ok)return e.json();throw P(!0),new Error("Please verify number")})).then((function(e){(0,m.navigate)("/view-order",{state:{referenceCode:e.referenceCode}})})).catch((function(e){C(e.message)})).finally((function(){w(!1)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(e){var t;g(Object.assign({},y,((t={})[e.target.name]=e.target.value,t)))};return c.createElement(i.Z,null,c.createElement(o.uT.Root,{show:F,as:c.Fragment},c.createElement(o.Vq,{as:"div",static:!0,className:"fixed z-10 inset-0 overflow-y-auto max-w",initialFocus:V,open:F,onClose:P},c.createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},c.createElement(o.uT.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"},c.createElement(o.Vq.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})),c.createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹"),c.createElement(o.uT.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},c.createElement("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle md:max-w-lg sm:w-full"},c.createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},c.createElement("div",{className:"mt-3 text-center sm:mt-0  sm:text-left"},c.createElement(o.Vq.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900"},"Verify Phone Number to create order"),c.createElement("br",null)),c.createElement("input",{type:"text",class:"relative outline-none rounded py-4 px-3 w-full bg-white shadow text-base text-gray-700 placeholder-gray-400 focus:outline-none focus:shadow-outline",placeholder:"Enter **** code"})),c.createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},c.createElement("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){return P(!1)}},"Verify"),c.createElement("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:function(){return P(!1)},ref:V},"Cancel"))))))),c.createElement("div",{class:"container mx-auto mt-10"},c.createElement("div",{class:"flex shadow-md my-10"},c.createElement("div",{class:"w-3/4 bg-gray-50 px-10 py-10"},c.createElement("div",{class:"flex justify-between border-b pb-8"},c.createElement("h1",{class:"font-semibold text-2xl"},"Shopping Cart"),c.createElement("h2",{class:"font-semibold text-2xl"},null==s?void 0:s.length," Items")),c.createElement("div",{class:"flex mt-10 mb-5"},c.createElement("h3",{class:"font-semibold text-gray-600 text-xs uppercase w-2/5"},"Product"),c.createElement("h3",{class:"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center"},"Quantity"),c.createElement("h3",{class:"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center"},"Price"),c.createElement("h3",{class:"font-semibold text-center text-gray-600 text-xs uppercase w-1/5 text-center"},"Total")),c.createElement(m.StaticQuery,{query:"1065498526",render:function(e){return e.allRestApiApiProducts.edges.map((function(e,t){if(s.includes(e.node.id))return q(e.node.price),c.createElement(u.Z,{data:e})}))}}),c.createElement("a",{href:"/shop",class:"flex font-semibold text-indigo-600 text-sm mt-10"},c.createElement("svg",{class:"fill-current mr-2 text-indigo-600 w-4",viewBox:"0 0 448 512"},c.createElement("path",{d:"M134.059 296H436c6.627 0 12-5.373 12-12v-56c0-6.627-5.373-12-12-12H134.059v-46.059c0-21.382-25.851-32.09-40.971-16.971L7.029 239.029c-9.373 9.373-9.373 24.569 0 33.941l86.059 86.059c15.119 15.119 40.971 4.411 40.971-16.971V296z"})),"Continue Shopping")),c.createElement("div",{id:"summary",class:"w-1/2 px-8 py-10 bg-gray-100"},c.createElement("div",{className:"flex flex-row justify-between border-b"},c.createElement("h1",{class:"font-semibold text-2xl pb-8"},"Order Details")),c.createElement("div",{class:"py-3"},c.createElement("label",{for:"promo",class:"font-semibold inline-block mb-3 text-sm uppercase"},"Full Name"),c.createElement("input",{onChange:O,type:"name",id:"name",name:"name",placeholder:"Name",class:"p-2 text-sm w-full",required:!0})),c.createElement("div",{class:"py-3"},c.createElement("label",{for:"promo",class:"font-semibold inline-block mb-3 text-sm uppercase"},"Phone #"),c.createElement("input",{onChange:O,type:"phone",id:"phone",name:"phone",placeholder:"+6644584",class:"p-2 text-sm w-full",required:!0})),c.createElement("div",{class:"flex flex-row justify-between"},c.createElement("div",{className:"py-3"},c.createElement("label",{for:"promo",class:"font-semibold inline-block mb-3 text-sm uppercase"},"Promo code"),c.createElement("input",{onChange:O,type:"name",id:"promo",name:"promoCode",placeholder:"YES",class:"p-2 text-sm w-full"}))),c.createElement("div",{className:"flex mt-6"},c.createElement("label",{className:"flex items-center"},c.createElement("input",{type:"checkbox",class:"form-checkbox"}),c.createElement("span",{class:"ml-2"},"I agree to the ",c.createElement("span",{class:"underline"},"terms and conditions")))),c.createElement("div",{className:"flex mt-6"},c.createElement("label",{className:"flex items-center"},c.createElement("input",{type:"checkbox",class:"form-checkbox"}),c.createElement("span",{class:"ml-2"},"I agree to subscribe to recieve ",c.createElement("span",{class:"underline"}," SMS messages ")," to get notified on orders"))),c.createElement("div",{class:"border-t mt-8"},c.createElement("div",{class:"flex font-semibold justify-between py-6 text-sm uppercase"},c.createElement("span",null,"Total cost"),c.createElement("span",null,"$",f)),c.createElement("button",{type:"button",onClick:I,disabled:j,class:"bg-indigo-500 font-semibold hover:bg-indigo-600 disabled:opacity-50  py-3 text-sm text-white uppercase w-full"},"Create Order",v?"loading...":""))))))}}}]);
//# sourceMappingURL=component---src-pages-cart-js-8fa0656db109734b647f.js.map